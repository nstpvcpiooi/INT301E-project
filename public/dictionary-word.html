<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASL (Node.js + KNN + MediaPipe)</title>
    <link rel="stylesheet" href="/style.css"> <!-- Đường dẫn đúng khi dùng Express static -->
    <!-- MediaPipe -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <h1>Nhận Diện ASL (Node.js Server)</h1>
        <p>Sử dụng MediaPipe và KNN. Bạn cần tự thu thập dữ liệu mẫu.</p>
        <p class="note">Hướng dẫn: Nhấn "Bắt đầu". Thực hiện một cử chỉ ASL (A-Y). Nhập ký tự tương ứng vào ô "Nhãn" rồi nhấn "Lưu Mẫu Này". Lặp lại nhiều lần cho mỗi ký tự.</p>

        <div class="video-container">
            <video class="input_video" id="input_video" autoplay playsinline style="display: none;"></video>
            <canvas class="output_canvas" id="output_canvas" width="480" height="360"></canvas>
        </div>

        <div class="controls">
            <button id="start-button">Bắt đầu</button>
            <p>Số mẫu dữ liệu đã lưu: <span id="data-count">0</span></p>
        </div>

        <div class="results">
            <h2>Ký tự nhận diện:</h2>
            <p id="recognized-char">---</p>
            <p id="status-text">Nhấn "Bắt đầu" và cho phép webcam.</p>
        </div>


        <!-- Thêm vào sau phần target-section -->
        <!-- <div class="dictionary-section">
            <h2>Từ Điển Chữ Ghép</h2>
            <div class="dictionary-controls">
                <input type="text" id="dictionary-input" placeholder="Nhập từ cần thực hiện">
                <button id="start-dictionary-button">Bắt đầu</button>
                <button id="next-letter-button" disabled>Ký tự Tiếp Theo</button>
                <button id="reset-dictionary-button">Đặt lại</button>
            </div>
            <div class="dictionary-progress">
                <p>Từ hiện tại: <span id="current-word">---</span></p>
                <p>Tiến trình: <span id="current-progress">0/0</span></p>
                <p>Ký tự hiện tại: <span id="current-dict-char">---</span></p>
            </div>
        </div> -->

      <!-- Thêm vào sau phần target-section -->
<div class="dictionary-section">
    <h2>Từ Điển Chữ Ghép</h2>
    <div class="dictionary-controls">
        <input type="text" id="dictionary-input" placeholder="Nhập từ cần thực hiện">
        <button id="start-dictionary-button">Bắt đầu</button>
        <button id="next-letter-button" disabled>Ký tự Tiếp Theo</button>
        <button id="reset-dictionary-button">Đặt lại</button>
    </div>
    <div class="dictionary-progress">
        <p>Từ hiện tại: <span id="current-word">---</span></p>
        <p>Tiến trình: <span id="current-progress">0/0</span></p>
        <p>Ký tự hiện tại: <span id="current-dict-char">---</span></p>
    </div>
</div>


        <div class="data-collection">
            <h3>Công Cụ Thu Thập Dữ Liệu Mẫu</h3>
            <label for="char-label">Nhãn chữ cái (A-Y, không J, Z):</label>
            <input type="text" id="char-label" maxlength="1" size="3">
            <button id="capture-sample-button" disabled>Lưu Mẫu Này</button>
            <div class="data-actions">
                <button id="clear-data-button">Xóa Tất Cả Mẫu Đã Lưu</button>
                <button id="export-data-button">Xuất Dữ Liệu Mẫu (JSON)</button>
                <label for="import-file" class="import-button">Nhập Dữ Liệu Mẫu (JSON)</label>
                <input type="file" id="import-file" accept=".json" style="display: none;">
            </div>
            <p class="note-collection"><em>Sau khi bật nhận diện, đưa tay vào, thực hiện cử chỉ, nhập nhãn và nhấn "Lưu Mẫu". Làm ít nhất 5-10 mẫu cho mỗi ký tự.</em></p>
        </div>
    </div>
    <script src="/script-word.js"></script> <!-- Đường dẫn đúng khi dùng Express static -->
</body>
</html>