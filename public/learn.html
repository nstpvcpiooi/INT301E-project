<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Học Từ bằng Thủ Ngữ</title>
    <link rel="stylesheet" href="/style.css"> <!-- Sử dụng CSS chung -->
    <!-- MediaPipe -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
    <style>
        /* Thêm style riêng nếu cần */
        .learning-area {
            border: 1px solid #ddd;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 5px;
            background-color: #f9f9f9;
            min-height: 150px; /* Đủ chỗ cho các dòng chữ */
        }
        #target-word-display span {
            font-size: 2.5em;
            font-weight: bold;
            margin: 0 0.1em;
            padding: 0.1em 0.3em;
            border-radius: 4px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        #target-word-display span.current-letter {
            background-color: #007bff;
            color: white;
        }
         #target-word-display span.done-letter {
            background-color: #d4edda; /* Màu xanh lá nhạt */
            color: #155724; /* Màu xanh lá đậm */
            text-decoration: line-through;
        }
        #current-letter-instruction {
            font-size: 1.2em;
            margin-top: 10px;
            color: #555;
        }
        #current-letter-target {
            font-size: 4em;
            font-weight: bold;
            color: #007bff;
            margin: 10px 0;
            min-height: 1.5em; /* Giữ chỗ */
        }
        #feedback-message {
            font-size: 1.5em;
            font-weight: bold;
            min-height: 1.5em; /* Giữ chỗ */
            margin-top: 15px;
        }
        .feedback-correct {
            color: green;
        }
        .feedback-incorrect {
            color: red;
        }
        #completion-message {
            font-size: 1.8em;
            color: #28a745;
            font-weight: bold;
            margin-top: 20px;
        }
        .word-input-area {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap; /* Cho phép xuống dòng */
        }
         .word-input-area input[type="text"] {
            padding: 8px 12px;
            font-size: 1em;
            border: 1px solid #ccc;
            border-radius: 4px;
            min-width: 200px;
         }
         .word-input-area button {
            padding: 9px 15px; /* Điều chỉnh padding cho cân đối */
         }

         /* Giữ nguyên layout camera từ hangman */
        .recognition-area { display: flex; flex-wrap: wrap; justify-content: center; align-items: flex-start; gap: 20px; border-top: 1px solid #eee; padding-top: 20px; }
        .video-container { position: relative; width: 480px; height: 360px; background-color: #333; }
        .input_video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .output_canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .recognition-controls { display: flex; flex-direction: column; align-items: center; gap: 10px; min-width: 250px; }
        .recognition-controls h2 { margin-top: 0; font-size: 1.3em; }
        #recognized-char { font-size: 2.5em; font-weight: bold; color: #28a745; min-height: 1.5em;}

    </style>
</head>
<body>
    <div class="container learn-container">
        <h1>Học Từ bằng Thủ Ngữ ASL</h1>
        <p class="note">Nhập một từ (chỉ A-Y, 0-9) hoặc chọn từ ngẫu nhiên. Sau đó dùng thủ ngữ để biểu diễn từng ký tự.</p>

        <div class="word-input-area">
            <input type="text" id="word-input" placeholder="Nhập từ bạn muốn học...">
            <button id="use-word-button">Học Từ Này</button>
            <button id="random-word-button">Chọn Từ Ngẫu Nhiên</button>
        </div>

        <div class="learning-area">
            <h3>Từ đang học:</h3>
            <p id="target-word-display">---</p> <!-- Hiển thị từ với highlight -->
            <p id="current-letter-instruction">Biểu diễn ký tự:</p>
            <div id="current-letter-target">?</div> <!-- Ký tự cần làm -->
            <p id="feedback-message"></p> <!-- Feedback đúng/sai -->
            <p id="completion-message"></p> <!-- Thông báo hoàn thành -->
        </div>


        <div class="recognition-area">
            <div class="video-container">
                <video class="input_video" id="input_video" autoplay playsinline style="display: none;"></video>
                <canvas class="output_canvas" id="output_canvas" width="480" height="360"></canvas>
            </div>
            <div class="recognition-controls">
                 <button id="start-camera-button">Bật Camera & Bắt Đầu Học</button>
                 <p id="status-text">Nhấn nút trên để bắt đầu.</p>
                 <h2>Đang nhận diện: <span id="recognized-char">---</span></h2>
                 <!-- Không cần nút submit ở đây -->
            </div>
        </div>

        <div class="controls">
             <button id="reset-learn-button">Học Từ Khác</button>
        </div>

    </div>
    <script src="/learn.js"></script> <!-- File JS mới cho tính năng này -->
</body>
</html>